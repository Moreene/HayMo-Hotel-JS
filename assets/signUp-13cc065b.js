import"./bootstrap-3dca8c45.js";import"./hamMenu-6b7faa69.js";import"./toTopBtn-95c6dae3.js";import l from"https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/esm/axios.js";import{i as n,a as u,j as c,s as m,e as i}from"./config-e6f0afb8.js";const d=document.querySelector("#userName"),s=document.querySelector("#userPhoneNum"),a=document.querySelector("#userEmail"),o=document.querySelector("#userPassword"),r=document.querySelector("#passwordCheck"),t=document.querySelector(".singUp-form");t.addEventListener("submit",h);function h(e){if(e.preventDefault(),t.checkValidity())if(n(s.value.trim()))if(u(a.value.trim()))if(o.value.trim().length<6&&r.value.trim().length<6){document.querySelector(".js-shortPassword").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>密碼長度過短！請設定6位數以上的密碼',o.value="",r.value="";return}else if(o.value.trim()!==r.value.trim()){document.querySelector(".js-checkPasswordError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>再次輸入的密碼錯誤',r.value="";return}else p(),t.reset(),t.classList.remove("was-validated");else{document.querySelector(".js-emailError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>Email格式錯誤',a.value="";return}else{document.querySelector(".js-phoneError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>手機號碼格式錯誤',s.value="";return}else{e.stopPropagation();return}}function p(){l.post(`${c}/users`,{name:d.value,phone:s.value,email:a.value,password:o.value}).then(e=>{console.log(e),localStorage.setItem("userName",e.data.user.name),localStorage.setItem("userPhoneNum",e.data.user.phone),localStorage.setItem("userEmail",e.data.user.email),localStorage.setItem("userToken",e.data.accessToken),localStorage.setItem("userId",e.data.user.id),m("恭喜，註冊成功！","",3e3),setTimeout(()=>window.location.href="login.html",3e3)}).catch(e=>{console.log(e),e.message==="Network Error"?i("網路異常，無法註冊！",""):i(e,"")})}

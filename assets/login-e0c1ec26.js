import"./bootstrap-3dca8c45.js";import"./hamMenu-6b7faa69.js";import"./toTopBtn-95c6dae3.js";import n from"https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/esm/axios.js";import{j as m,s as u,e as r,a as d}from"./config-e6f0afb8.js";const i=document.querySelector(".js-loginEmail"),o=document.querySelector(".js-loginPassword"),l=document.querySelector(".login-form");l.addEventListener("submit",f);function f(e){if(e.preventDefault(),l.checkValidity()){if(i.value.trim()!==`${localStorage.getItem("userEmail")}`){document.querySelector(".js-emailWrong").innerHTML='<i class="bi bi-exclamation-circle me-4"></i> 帳號錯誤，請重新確認',i.value="";return}else if(o.value.trim().length<6){document.querySelector(".js-passwordError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i> 密碼錯誤，請重新確認',o.value="";return}}else{e.stopPropagation();return}g()}function g(){n.post(`${m}/login`,{email:i.value,password:o.value}).then(e=>{u("登入成功！","",3e3),l.reset(),l.classList.remove("was-validated"),setTimeout(()=>{window.location.href=`memberCenter.html?id=${localStorage.getItem("userId")}`},3e3)}).catch(e=>{e.response?(console.log(e.response.data),e.response.data==="Incorrect password"&&(o.value="",document.querySelector(".js-passwordError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i> 密碼錯誤，請重新確認')):e.message==="Network Error"?(console.log(e),r("網路異常，無法登入！","")):(console.log(e),r(e,""))})}const p=document.querySelector(".conceal"),c=document.querySelector("#conceal-icon");p.addEventListener("click",v);function v(e){e.preventDefault(),o.type==="password"?(o.type="text",c.className="fa-regular fa-eye-slash"):(o.type="password",c.className="fa-regular fa-eye")}const a=document.querySelector(".js-forgrtPasswordEmail"),t=document.querySelector(".modal-form");t.addEventListener("submit",w);function w(e){if(e.preventDefault(),t.checkValidity()){if(a.value.trim()!==""&&!d(a.value.trim())){document.querySelector(".js-emailError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>Email格式錯誤',a.value="";return}}else{e.stopPropagation();return}n.post(`${m}/forgotPasswords`,{email:a.value}).then(s=>{u("已寄出驗證信！","",3e3),t.reset(),t.classList.remove("was-validated"),$("#forgotPassword").modal("hide")}).catch(s=>{console.log(s),s.message==="Network Error"?r("網路異常，無法送出！",""):r(s,"")})}document.querySelector(".btn-close").addEventListener("click",()=>{t.classList.remove("was-validated")});document.querySelector(".js-canaelBtn").addEventListener("click",()=>{t.classList.remove("was-validated")});

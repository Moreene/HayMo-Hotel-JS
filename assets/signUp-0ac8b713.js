import{i as m,a as d,j as n,s as h,e as i}from"./config-eec7a752.js";import"./hamMenu-6b7faa69.js";import"./toTopBtn-95c6dae3.js";import c from"https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/esm/axios.js";const p=document.querySelector("#userName"),t=document.querySelector("#userPhoneNum"),a=document.querySelector("#userEmail"),r=document.querySelector("#userPassword"),s=document.querySelector("#passwordCheck"),o=document.querySelector(".singUp-form");o.addEventListener("submit",v);function v(e){if(e.preventDefault(),o.checkValidity())if(m(t.value.trim()))if(d(a.value.trim()))if(r.value.trim().length<6&&s.value.trim().length<6){document.querySelector(".js-shortPassword").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>密碼長度過短！請設定6位數以上的密碼',r.value="",s.value="";return}else if(r.value.trim()!==s.value.trim()){document.querySelector(".js-checkPasswordError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>再次輸入的密碼錯誤',s.value="";return}else f(),o.reset(),o.classList.remove("was-validated");else{document.querySelector(".js-emailError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>Email格式錯誤',a.value="";return}else{document.querySelector(".js-phoneError").innerHTML='<i class="bi bi-exclamation-circle me-4"></i>手機號碼格式錯誤',t.value="";return}else{e.stopPropagation();return}}function f(){c.post(`${n}/users`,{name:p.value,phone:t.value,email:a.value,password:r.value,userToken:""}).then(e=>{const u=e.data.user.id;c.patch(`${n}/users/${u}`,{userToken:e.data.accessToken}).then(l=>{h("恭喜，註冊成功！","",3e3),setTimeout(()=>window.location.href="login.html",3e3)}).catch(l=>{console.log(l)})}).catch(e=>{console.log(e),e.message==="Network Error"?i("網路異常，無法註冊！",""):e.response.data==="Email already exists"?i("該Email帳號已被註冊過！","請選擇其它帳號註冊"):i(e,"")})}
